function UTSDB(){}function $ZNotifier(){}function $ZSNotify(data){"use strict";return this.init(data)}var _utsserver=_ZSLUTSSERVERURL,UTSMODE={CORS:0,WS:1},networkevent={OFFLINE:0,ONLINE:1,INIT:-1},_utsmode=UTSMODE.WS,uts={net:{},util:{},moninterval:15e3},apivalues={},$zslisinited=!1,_zslid="",_zslcustomerdata="",_zslsid="",_zslcallbacks={},consecutivefailurecnt=0,disablebind=!1,isconnected=!1,initialized=!1,httphack="http",urlscheme=-1===window.location.protocol.indexOf("https")?httphack+"://":httphack+"s://",triggeredevent=networkevent.INIT,_MAXFAILURECOUNT=3,EMAIL_PARAM_REGEX=new RegExp("^[\\w]([\\w\\-\\.\\+\\'\\/]*)@([\\w\\-\\.]*)(\\.[a-zA-Z]{2,22}(\\.[a-zA-Z]{2}){0,2})$");UTSDB.store=function(key,value,expiry){this.storeInLocalStorage(key,value,expiry)||this.storeInCookie(key,value,expiry)},UTSDB.storeInLocalStorage=function(key,value,expiry){if(!window.localStorage)return!1;key=this.getModifiedKey(key);var data=JSON.parse(localStorage.utsdb||"{}"),obj={};return obj[key]=value,expiry&&(obj.ttl=expiry,obj.time=(new Date).getTime()),data[key]=obj,localStorage.utsdb=JSON.stringify(data),!0},UTSDB.storeInCookie=function(key,value,expirytime){key=this.getModifiedKey(key);var expDate=new Date;expirytime=expirytime||864e5,expDate.setTime(expDate.getTime()+expirytime),document.cookie=key+"= "+value+";expires= "+expDate.toGMTString()+";"},UTSDB.get=function(key){return window.localStorage?UTSDB.getFromLocalStorage(key):UTSDB.getFromCookie(key)},UTSDB.getFromLocalStorage=function(key){if(!window.localStorage)return!1;key=this.getModifiedKey(key);var data=JSON.parse(localStorage.utsdb||"{}"),obj=data[key];return obj?obj.ttl&&obj.ttl+obj.time<(new Date).getTime()?(delete data[key],localStorage.utsdb=JSON.stringify(data),null):obj[key]:null},UTSDB.getFromCookie=function(key){key=this.getModifiedKey(key),key+="=";var init=document.cookie.indexOf(key),value="";return-1!==init&&(value=document.cookie.substr(init+key.length),-1!==value.indexOf(";")&&(value=value.substring(0,value.indexOf(";")))),value},UTSDB.getModifiedKey=function(key){return key},uts.net={connAlive:function(){uts.lpt=new Date},connMonitor:function(){var currenttime=new Date;currenttime-uts.lpt>4*uts.moninterval&&(disablebind||isconnected?disablebind===!1&&this.triggerBind():(this.disableConnection(),uts.init())),setTimeout(function(){uts.net.connMonitor()},uts.moninterval)},handleUTSEvent:function(ev){var data=ev.d,opr=ev.o;switch(opr){case 0:if(initialized=!0,_zslsid=data.sid,$zoho.spotlight._cleanQueue(),data.notification){new $ZSNotify(data.notification)}uts.net.handleCallbacks(data);break;case 1:break;case 100:if(data){new $ZSNotify(data.message)}break;case-1:var duration=data&&data.duration||"";uts.net.disableConnection(duration);break;case 101:$zoho.spotlight._cleanQueue(),uts.net.handleCallbacks(data)}},handleCallbacks:function(data){try{if(data.status){var opr=data.opr;"track"===opr&&(opr=data.action),opr in _zslcallbacks&&_zslcallbacks[opr]()}delete _zslcallbacks[opr]}catch(e){}},handleResponse:function(data){if(isconnected=!0,data)if(data=JSON.parse(data),"[object Array]"===Object.prototype.toString.call(data))for(var i=0;i<data.length;i++)this.handleUTSEvent(data[i]);else this.handleUTSEvent(data)},triggerBind:function(){_ZSLISTRACKONDEMAND?$zslisinited&&$zoho.spotlight._cleanQueue():(disablebind=!1,uts.util.checkMode(UTSMODE.WS)?WS.bind():uts.util.checkMode(UTSMODE.CORS)&&CR.init())},scheduleRecon:function(){function getRandomInt(min,max){return Math.floor(Math.random()*(max-min+1)+min)}var reconnectiondelay=[30,60,90,120,300],index=0,callbacktimer=-1;return function(initcountdown,callbackfn){initcountdown?(index=0,reconnectiondelay[0]=getRandomInt(5,30)):index<reconnectiondelay.length-1&&index++;var countdown=reconnectiondelay[index];clearTimeout(callbacktimer),callbacktimer=setTimeout(callbackfn,1e3*countdown)}}(),goOffline:function(){if(consecutivefailurecnt>=_MAXFAILURECOUNT||triggeredevent===networkevent.OFFLINE){if(disablebind=!0,consecutivefailurecnt>_MAXFAILURECOUNT)return void(isconnected=!1);var init=!1;(consecutivefailurecnt===_MAXFAILURECOUNT||triggeredevent===networkevent.OFFLINE)&&(init=!0),triggeredevent=networkevent.INIT,this.scheduleRecon(init,this.triggerBind)}},requestSuccess:function(){(consecutivefailurecnt>=_MAXFAILURECOUNT||triggeredevent===networkevent.ONLINE)&&(triggeredevent=networkevent.INIT,disablebind=!1)},disableConnection:function(duration){if(disablebind=!0,duration){var durationinms=60*duration*1e3,nextrecontime=(new Date).getTime()+durationinms;UTSDB.store("nextrecon",nextrecontime),setTimeout(this.triggerBind,durationinms)}uts.util.checkMode(UTSMODE.WS)?WS.disableConnection():uts.util.checkMode(UTSMODE.CORS)&&CR.disableConnection()}},uts.util={addOnOffEvent:function(evname,func){document.body.attachEvent?document.body.attachEvent("on"+evname,func):window.addEventListener&&window.addEventListener(evname,func)},checkMode:function(mode){return _utsmode===mode?!0:!1},composeUrl:function(){function checkAndPush(name,value){value&&urlarray.push(name+"="+encodeURIComponent(trim(value)))}function trim(value){return value&&isNaN(value)?"object"==typeof value?JSON.stringify(value):value.replace(/^\s+|\s+$/gm,""):value}var urlarray=[],_appid=$zoho.spotlight.app_id;if(_appid){var urlobj={"x-appid":_appid,id:_zslid};_zslcustomerdata&&(urlobj.data=_zslcustomerdata);for(var a in urlobj)urlobj.hasOwnProperty(a)&&checkAndPush(a,urlobj[a]);if(initialized)checkAndPush("recon","true");else{var status=apivalues.trackstatus;status&&checkAndPush("cstatus",JSON.stringify(status))}return urlarray.join("&")}},_encodeData:function(data){var obj=JSON.parse(JSON.stringify(data));return obj&&("object"==typeof obj&&(obj=JSON.stringify(obj)),obj=encodeURIComponent(obj)),obj},ajax:function(props){var ajaxreq,type=props.type||"GET",isasync=props.async||!0,onsuccess=props.onSuccess||function(){},onfailure=props.onFailure||function(){},onerror=props.onError||function(){},url=props.url,options=props.options||{};if(ajaxreq=new XMLHttpRequest,"withCredentials"in ajaxreq){ajaxreq=new XMLHttpRequest,ajaxreq.open(type,url,isasync),ajaxreq.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=UTF-8"),options.ajaxreq=ajaxreq;try{ajaxreq.onreadystatechange=function(){4===ajaxreq.readyState&&(200===ajaxreq.status?onsuccess(options):onfailure(options))}}catch(e){onerror(e)}}else if("undefined"!=typeof XDomainRequest){ajaxreq=new XDomainRequest,ajaxreq.open("GET",url),options.ajaxreq=ajaxreq;try{ajaxreq.onprogress=function(){},ajaxreq.ontimeout=function(){},ajaxreq.onload=function(){onsuccess(options)},ajaxreq.onerror=function(){onfailure(options)}}catch(e){onerror(e)}}return setTimeout(function(){ajaxreq.send()},0),ajaxreq}},uts.util.addOnOffEvent("online",function(){uts.net.triggerBind(),triggeredevent=networkevent.ONLINE}),uts.util.addOnOffEvent("offline",function(){triggeredevent=networkevent.OFFLINE,uts.net.goOffline()}),$ZNotifier.sendReq=function(url){function onSuccess(options){uts.net.handleResponse(options.ajaxreq.responseText),$zslisinited=!0}var props={url:url,onSuccess:onSuccess};uts.util.ajax(props)},$ZNotifier.updateData=function(opr,data){if(opr&&Object.keys(data).length){var obj={opr:opr,data:data};this.notifyServer(obj)}},$ZNotifier.notifyServer=function(obj){_ZSLISTRACKONDEMAND?"track"===obj.opr?this.trackEvent(obj.data):this.updateEntity(obj.opr,obj.data):uts.util.checkMode(UTSMODE.WS)?WS._WEBSOCK.send(JSON.stringify(obj)):uts.util.checkMode(UTSMODE.CORS)&&CR.bind(obj)},$ZNotifier.handleApiChange=function(operation,val){switch(operation){case 1:"on"===val?uts.init():"off"===val&&uts.net.disableConnection();break;case 2:!isNaN(val)}},$ZNotifier.updateEntity=function(opr,data){var appid=$zoho.spotlight.app_id;if(appid&&_zslid){var url=urlscheme+_utsserver+"/entity?x-appid="+encodeURIComponent(appid)+"&id="+_zslid+"&opr="+opr;data&&(url+="&data="+uts.util._encodeData(data)),$ZNotifier.sendReq(url)}},$ZNotifier.trackEvent=function(data){var appid=$zoho.spotlight.app_id;if(appid&&_zslid){var url=urlscheme+_utsserver+"/track?x-appid="+encodeURIComponent(appid)+"&id="+_zslid+"&data="+uts.util._encodeData(data);$ZNotifier.sendReq(url)}},$ZaddEvent=function(el,evname,func){el.attachEvent?el.attachEvent("on"+evname,func):el.addEventListener(evname,func,!0)},WS={id:null,wsScheme:-1===window.location.protocol.indexOf("https")?"ws://":"wss://",wsUrl:_utsserver+"/watchws?",_WEBSOCK:{},pingTimer:{},recontimer:null,readystate:{CONNECTING:0,OPEN:1,CLOSING:2,CLOSED:3},init:function(){if(_utsmode=UTSMODE.WS,"off"!==apivalues.tracking)try{var url=WS.wsScheme+WS.wsUrl;url+=uts.util.composeUrl(),"WebSocket"in window?WS._WEBSOCK=new WebSocket(url):"MozWebSocket"in window&&(WS._WEBSOCK=new MozWebSocket(url)),WS._WEBSOCK.id=(new Date).getTime(),WS.id=WS._WEBSOCK.id,WS._WEBSOCK.onopen=function(evt){WS.onOpen(evt)},WS._WEBSOCK.onclose=function(evt){WS.id===this.id&&WS.onClose(evt)},WS._WEBSOCK.onmessage=function(evt){WS.onMessage(evt)}}catch(e){}},onMessage:function(evt){uts.net.connAlive(),consecutivefailurecnt=0,uts.net.requestSuccess();var data=evt.data;if(""!==data){if(","===data)return void WS.init();var parsed_data=JSON.parse(data);if(parsed_data[0].d.status){var opr=parsed_data[0].d.opr;"track"===opr&&(opr=parsed_data[0].d.action),opr in _zslcallbacks&&(_zslcallbacks[opr](),delete _zslcallbacks[opr])}uts.net.handleResponse(data),clearInterval(WS.pingTimer),WS.pingTimer=setInterval(function(){try{WS._WEBSOCK.readyState===WS.readystate.OPEN&&WS._WEBSOCK.send("-")}catch(e){}},3e4)}},onOpen:function(){clearTimeout(WS.recontimer),$zslisinited=!0},onError:function(){},onClose:function(){if(uts.util.checkMode(UTSMODE.WS)){consecutivefailurecnt++,uts.net.goOffline(),clearTimeout(WS.recontimer);var timeout=(new Date).getTime()%20;WS.recontimer=setTimeout(function(){WS.bind()},1e3*timeout)}},bind:function(){disablebind!==!0&&uts.util.checkMode(UTSMODE.WS)&&((WS._WEBSOCK.readyState===WS.readystate.CONNECTING||WS._WEBSOCK.readyState===WS.readystate.OPEN)&&WS._WEBSOCK.close(),clearTimeout(WS.recontimer),WS.init(),uts.net.connAlive())},disableConnection:function(){WS._WEBSOCK.close()}},CR={lastevttime:0,reqobjs:[],fullTripTimer:null,respTimer:null,sendReq:function(url){function onSuccess(options){var evtstarttime=options.evtstarttime,response=options.ajaxreq.responseText;CR.lastevttime-evtstarttime>4e4&&""===response||(uts.net.handleResponse(response),uts.net.connAlive(),uts.net.requestSuccess(),consecutivefailurecnt=0,$zslisinited=!0,""!==response&&CR.bind())}function onFailure(options){var status=options.ajaxreq.status;CR.reqobjs[0]&&CR.reqobjs[0].abort(),clearTimeout(CR.respTimer),CR.respTimer=setTimeout(function(){CR.bind()},1e4),500!==status&&304!==status&&404!==status&&400!==status&&(consecutivefailurecnt++,uts.net.goOffline())}function onError(exp){throw clearTimeout(CR.respTimer),CR.respTimer=setTimeout(function(){CR.bind()},1e4),consecutivefailurecnt++,uts.net.goOffline(),exp}var starttime=(new Date).getTime();CR.lastevttime=starttime;var ajaxprops={url:url,onSuccess:onSuccess,onFailure:onFailure,onError:onError,options:{evtstarttime:starttime}},ajaxreq=uts.util.ajax(ajaxprops);CR.reqobjs[0]=CR.reqobjs[1],CR.reqobjs[1]=ajaxreq},init:function(){if(_utsmode=UTSMODE.CORS,"off"!==apivalues.tracking){CR.disableConnection();var url=urlscheme+_utsserver+"/watch?";url+=uts.util.composeUrl()+"&nocache="+(new Date).getTime(),CR.sendReq(url)}},bind:function(data){if(disablebind!==!0&&(null!==CR.respTimer&&clearTimeout(CR.respTimer),_zslsid)){var url=urlscheme+_utsserver+"/bind?sid="+encodeURIComponent(_zslsid)+"&nocache="+(new Date).getTime();data&&(url+="&data="+uts.util._encodeData(data)),uts.net.connAlive(),CR.sendReq(url),clearTimeout(CR.fullTripTimer),CR.fullTripTimer=setTimeout(function(){CR.bind()},3e4)}},disableConnection:function(){for(var i=0;i<CR.reqobjs.length;i++)CR.reqobjs[i]&&CR.reqobjs[i].abort();clearTimeout(CR.fullTripTimer),clearTimeout(CR.respTimer)}},uts.init=function(){function scheduleFallback(){setTimeout(function(){WS._WEBSOCK.readyState!==WS.readystate.OPEN&&CR.init()},3e4)}var connectionallowed=!0;UTSDB.get("nextrecon")&&(connectionallowed=UTSDB.get("nextrecon")-(new Date).getTime()<0?!0:!1),connectionallowed&&("WebSocket"in window||"MozWebSocket"in window?(WS.init(),scheduleFallback()):("withCredentials"in new XMLHttpRequest||window.XDomainRequest)&&CR.init()),uts.net.connMonitor()},uts.checkAndInit=function(){if($zoho.spotlight.app_id){if($zslisinited)return!1;var queue=$zoho.spotlight.q;if(queue&&queue.length>0)for(var i=0;i<queue.length;i++){var currobj=queue[i];if("identify"in currobj){queue.splice(i,1),_zslid=currobj.identify[0];var data=currobj.identify[1];data&&Object.keys(data).length>0&&(data.hasOwnProperty("email")&&!EMAIL_PARAM_REGEX.test(data.email)&&delete data.email,_zslcustomerdata=data),currobj.identify[2]&&(_zslcallbacks.identify=currobj.identify[2]),_ZSLISTRACKONDEMAND?$ZNotifier.updateEntity("identify",_zslcustomerdata):uts.init();break}}}},uts.checkAndInit(),function(){var $zsltimer=0;$zoho.spotlight.q.push=function(){return $zslisinited?(clearTimeout($zsltimer),$zsltimer=setTimeout(function(){$zoho.spotlight._cleanQueue()},500)):setTimeout(function(){uts.checkAndInit()},5),Array.prototype.push.apply(this,arguments)},$zoho.spotlight._cleanQueue=function(){for(var qlength=this.q.length,i=0;qlength>i;i++)this._parseAndUpdate(this.q[i]);for(var i=this.q.length-1;i>=0;i--)this.q.splice(i,1)},$zoho.spotlight._parseAndUpdate=function(data){for(var d in data){var obj={},details=data[d];switch(d){case"identify":break;case"track":if(!details[0])return;obj.action=details[0],details[1]&&(obj.actiondata=details[1]),details[2]&&(_zslcallbacks[details[0]]=details[2]);break;case"company.increment":obj.name=details[0],details[1]&&(obj.value=details[1]),details[2]&&(_zslcallbacks[d]=details[2]);break;case"customer.increment":obj.name=details[0],details[1]&&(obj.value=details[1]),details[2]&&(_zslcallbacks[d]=details[2]);break;case"customer.delete":case"company.delete":$ZNotifier.updateEntity(d);break;case"customer.set":details[0]&&details[0].hasOwnProperty("email")&&!EMAIL_PARAM_REGEX.test(details[0].email)&&delete details[0].email;default:obj=details[0],details[1]&&(_zslcallbacks[d]=details[1])}$ZNotifier.updateData(d,obj)}}}(),function(window,document){"use strict";$ZSNotify.prototype={init:function(data){if(data){data=JSON.parse(data),this.name=data.name;var notification_type=data.type||1;switch(notification_type){case 1:this.createAnnouncement(data);break;case 2:this.createNotification(data);break;case 3:this.createBanner(data)}var track_obj={name:data.name};data.triggerid&&(track_obj.triggerid=data.triggerid),$zoho.spotlight.track("Notification Seen",track_obj)}},createBanner:function(data){if(data){var banner_container=document.createElement("div");banner_container.className="zohoslt_dialog zohoslt_slbanner",banner_container.id="dialog";var agentdata=this.getAgentHtml(data),html='<table cellpadding="0" cellspacing="0" border="0"><tbody><tr>';agentdata&&(html+='<td class="zohoslt_slbanner-lft">'+agentdata+"</td>"),html+='<td class="zohoslt_slbanner-mdl"><div class="zohoslt_ann_cnt">'+this.convertJSONtoHTML(data.content)+"</div></td>",html+='</tr></tbody></table><em class="zohoslt_spritebg zohoslt_close" purpose="close"></em>',banner_container.innerHTML=html,document.body.appendChild(banner_container),this.attachEvent(banner_container,"click",function(ev){var target=ev.srcElement?ev.srcElement:ev.target;if(target){var purpose=target.getAttribute("purpose");if(!purpose)return;"close"===purpose&&document.body.removeChild(banner_container)}})}},createNotification:function(data){if(data){var data_html=this.convertJSONtoHTML(data.content),notification_container=document.createElement("div");notification_container.className="zohoslt_embed";var bgimage="",firstcontent=data.content[0];firstcontent&&"bgimage"===firstcontent.type&&(bgimage="<img src="+_ZSLEMBEDSERVERURL+firstcontent.url+' class="zohoslt_edtr-bg"></img>');var html='<div class="zohoslt_updateprof"><div class="zohoslt_ann_cnt">'+data_html+"</div>"+bgimage+this.getAgentHtml(data);html+='<em class="zohoslt_spritebg zohoslt_close" purpose="close"></em></div></div>',notification_container.innerHTML=html,document.body.appendChild(notification_container),this.attachEvent(notification_container,"click",function(ev){var target=ev.srcElement?ev.srcElement:ev.target;if(target){var purpose=target.getAttribute("purpose");if(!purpose)return;"close"===purpose&&document.body.removeChild(notification_container)}})}},createAnnouncement:function(data){function getFeedbackHtml(){if(!data.isfeedbackvisible)return"";var fbcontent,feedbacktype=data.feedbacktype||1;switch(feedbacktype){case 1:fbcontent=getLikeHtml();break;case 2:fbcontent=getSmileyHtml();break;case 3:fbcontent=getStarHtml();break;case 4:fbcontent=getReplyHtml()}return fbcontent}function getLikeHtml(){return'<div id="zohoslt_feedback" class="zohoslt_ann_action"><div><input type="radio" name="like" id="zsl-like-1" class="zohoslt_like" purpose="like" rating="1"><label class="zohoslt_like" for="zsl-like-1"><em purpose="feedback"></em><p>Like</p></label><input type="radio" name="like" id="zsl-like-2" class="zohoslt_dislike" purpose="like" rating="2"><label for="zsl-like-2" class="zohoslt_dislike"><em purpose="feedback"></em><p>Dislike</p></label></div></div>'}function getStarHtml(){function getStar(rating){return'<input type="radio" class="zohoslt_star zohoslt_star-'+rating+'" id="zsl-star-'+rating+'" name="zsl-star" purpose="star" rating="'+rating+'"></input><label class="zohoslt_star zohoslt_star-'+rating+'" for="zsl-star-'+rating+'"><em purpose="feedback"></em></label>'}for(var starhtml='<div id="zohoslt_feedback" class="zohoslt_ann_action zohoslt_rating"><div class="zohoslt_star">',i=5;i>=1;i--)starhtml+=getStar(i);return starhtml+="</div></div>"}function getSmileyHtml(){return'<div id="zohoslt_feedback" class="zohoslt_ann_action"><div><input class="zohoslt_h_smiley" type="radio" id="zsl-smiley-1" name="smiley" purpose="happiness" level="1"><label class="zohoslt_h_smiley" for="zsl-smiley-1"><em purpose="feedback"></em></label><input class="zohoslt_n_smiley" type="radio" id="zsl-smiley-2" name="smiley" purpose="happiness" level="2"><label class="zohoslt_n_smiley" for="zsl-smiley-2"><em purpose="feedback"></em></label><input class="zohoslt_s_smiley" type="radio" id="smiley-3" name="smiley" purpose="happiness" level="3"><label class="zohoslt_s_smiley" for="smiley-3"><em purpose="feedback"></em></label></div></div>'}function removeLabelclass(){for(var labelparent=document.getElementById("zohoslt_feedback"),labels=labelparent.getElementsByTagName("label"),i=0;i<labels.length;i++)labels[i].className=labels[i].className.replace("zohoslt_sel","")}function getReplyHtml(){return'<div class="zohoslt_ann_action zohoslt_reply zohoslt_opcty"><input type="text" placeholder="Click here to reply" purpose="reply"><em class="zohoslt_spritebg" purpose="reply"></em></div>'}if(data){var html=this.convertJSONtoHTML(data.content),bgimage="",firstcontent=data.content[0];firstcontent&&"bgimage"===firstcontent.type&&(bgimage="<img src="+_ZSLEMBEDSERVERURL+firstcontent.url+' class="zohoslt_edtr-bg"></img>');var contenthtml='<div class="zohoslt_announcebx"><div class="zohoslt_ann_cnt">'+bgimage+html+"</div>",actionhtml=getFeedbackHtml();if(actionhtml+=this.getAgentHtml(data)){var classname=data.isuservisible?"":"zohoslt_no-brdr";contenthtml+='<div class="zohoslt_ann_actionbx '+classname+'">'+actionhtml+"</div>"}contenthtml+="</div>",contenthtml+='<em purpose="close" class="zohoslt_spritebg zohoslt_close"></em>';var container=document.createElement("div");container.id="zsl-announcement",container.className="zohoslt_dialog",container.innerHTML=contenthtml,document.body.appendChild(container);var wHeight=window.innerHeight||document.documentElement.clientHeight,wWidth=window.innerWidth||document.documentElement.clientWidth,top=(wHeight-container.offsetHeight)/2;top=10>top?10:top,wHeight<container.offsetHeight&&(container.style.position="absolute"),container.style.top=top+"px",container.style.left=(wWidth-container.offsetWidth)/2+"px",this.attachEvent(container,"keyup",function(ev){var target=ev.srcElement?ev.srcElement:ev.target;if(target){var purpose=target.getAttribute("purpose");if(purpose&&"reply"===purpose){var parent=target.parentNode;parent.className="zohoslt_ann_action zohoslt_reply",13===ev.keyCode&&($zoho.spotlight.track("Feedback - "+target.value),target.value=""),target.value||(parent.className="zohoslt_ann_action zohoslt_reply zohoslt_opcty")}}});var self=this;this.attachEvent(container,"click",function(ev){var target=ev.srcElement?ev.srcElement:ev.target;if(target){var purpose=target.getAttribute("purpose");if(!purpose)return;if("feedback"===purpose){removeLabelclass();var likelabel=target.parentElement;likelabel.className+=" zohoslt_sel"}if("close"===purpose)document.body.removeChild(container);else if("video"===purpose){var video_container=target.parentElement.parentElement,url=video_container.getAttribute("data-videourl");if(url){target.parentElement.style.display="none";var iframe=document.createElement("iframe");iframe.src=url+(url.split("?")[1]?"&":"?")+"autoplay=1",iframe.height=video_container.getAttribute("data-height")||200,iframe.width=video_container.getAttribute("data-width")||200,video_container.appendChild(iframe)}}else if("star"===purpose)$zoho.spotlight.track(target.getAttribute("rating")+" stars has been given for "+self.name);else if("like"===purpose){var rating=parseInt(target.getAttribute("rating")),message=data.name+"has been liked";2===rating&&(message=data.name+"has been disliked"),$zoho.spotlight.track(message)}else if("happiness"===purpose){var happiness_level="Extremely happy",rating=parseInt(target.getAttribute("rating"));1===rating?happiness_message="Happy":2===rating&&(happiness_message="Not happy"),$zoho.spotlight.track(happiness_level+" with "+data.name)}else if("button"===purpose){var action=target.getAttribute("action");new RegExp(/((https?:\/\/(?:www\.)?|www\.)[a-z0-9][^@]*?)(?=&quot;|&#x27;|&lt;|[\s"'<]|$)/gi).test(action)&&window.open(action),window[action],$zoho.spotlight.track("Button Clicked in "+data.name,{action:action})}}})}},attachEvent:function(element,evname,func){element||(element=document.body),document.body.attachEvent?element.attachEvent("on"+evname,func):window.addEventListener&&element.addEventListener(evname,func)},getAgentHtml:function(data){if(!data.isuservisible)return"";data=data.owner;var img='<div class="zohoslt_nouser"></div>';return data.imageurl&&(img='<img src="'+_ZSLEMBEDSERVERURL+data.imageurl+'"+ width="53" height="53" class="zohoslt_agent_img">'),'<div class="zohoslt_ann_agent zohoslt_clearfix">'+img+'<span class="zohoslt_txtelips"><p>'+data.name+"</p><p>"+data.email+"</p></span></div>"},convertJSONtoHTML:function(data){if(data){for(var html="",i=0;i<data.length;i++){var curr_data=data[i],type=curr_data.type;"paragraph"===type?html+='<div class="zohoslt_line">'+this.getParagraphHTML(curr_data.content)+"</div>":"image"===type?html+=this.getImageHtml(curr_data):"video"===type&&(html+=this.getVideoHtml(curr_data))}return html}},getParagraphHTML:function(data){if(!data)return"";var dlength=data.length;if(0===dlength)return"<br>";for(var html="",i=0;i<data.length;i++){var curr_data=data[i],type=curr_data.type;if("text"===type){var text=this.parseContent(curr_data.content);if(curr_data.format){var format=curr_data.format;"break"===format?html+="<br>":"bold"===format?html+="<b>"+text+"</b>":"italic"===format?html+="<i>"+text+"</i>":"underline"===format?html+="<u>"+text+"</u>":"link"===format?html+='<a href="'+curr_data.url+'" target="_blank">'+text+"</a>":"font"===format&&(html+='<font size="'+curr_data.fontsize+'" color="'+curr_data.fontcolor+'">'+text+"</font>")}else html+=text}else if("button"===type){var styletext="";curr_data.bgcolor&&(styletext+="background-color:"+curr_data.bgcolor+";"),curr_data.fontcolor&&(styletext+="color:"+curr_data.fontcolor),html+='<div class="zohoslt_dynbox"><div class="zohoslt_annbtn"  purpose="button" action="'+curr_data.action+'" style="'+styletext+'">'+curr_data.content[0].data+"</div></div>"}else"image"===type?html+=this.getImageHtml(curr_data):"video"===type&&(html+=this.getVideoHtml(curr_data))}return html},parseContent:function(content){if(content){var clength=content.length;if(0===clength)return"<br>";for(var textcontent="",i=0;clength>i;i++){var curr_content=content[i];textcontent+=curr_content.type?this.getParagraphHTML([curr_content]):curr_content.data}return textcontent}},getVideoHtml:function(data){if(data){var display_style="block"===data.display?"zohoslt_break":"zohoslt_inline";data.position&&(display_style+=" zohoslt_"+data.position);var styletext="";(data.width||data.height)&&(data.width&&(styletext+="width:"+data.width+"px;"),data.height&&(styletext+="height:"+data.height+"px;"));var html='<div class="'+display_style+' zohoslt_vdo_con"><div style="'+styletext+'" data-width="'+data.width+'" data-height="'+data.height+'"  data-videourl="'+data.url+'"><div class="zohoslt_se-v-icn-c"><div class="zohoslt_se-v-icn" purpose="video"></div><img src="'+_ZSLEMBEDSERVERURL+data.thumbnailurl+'" style="'+styletext+'"></div></div></div>';return html}},getImageHtml:function(data){if(data){var display_style="block"===data.display?"zohoslt_break":"zohoslt_inline";data.position&&(display_style+=" zohoslt_"+data.position);var styletext="";(data.width||data.height)&&(data.width&&(styletext+="width:"+data.width+"px;"),data.height&&(styletext+="height:"+data.height+"px;"));var html='<div class="'+display_style+'"><img src="'+_ZSLEMBEDSERVERURL+data.url+'" style="'+styletext+'"></div>';return html}}}}(window,document);