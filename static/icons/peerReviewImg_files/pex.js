function PexError(a){this.code=a.c,this.message=a.m,this.remotestatuscode=a.rc,this.remoteresponse=a.rm}function PexResponse(a,b){this.readyState=a,this.response=b,typeof b=="string"&&(this.resposeText=b)}function PexRequest(a){this.evid=a.evid,this.operation=a.operation,this.header=a.header,this.data=a.data,this.complete=a.complete,this.success=a.success,this.error=a.error,this.progress=a.progress,this.beforeSend=a.beforeSend,this.completecb=function(a,b){this.complete&&this.complete(a,b)},this.progresscb=function(a){this.progress&&this.progress(a)},this.successcb=function(a){this.success&&this.success(a)},this.failurecb=function(a){this.error&&this.error(a)},this.beforesendcb=function(){this.beforeSend&&this.beforeSend(this)},this.addHeader=function(a,b){this.header||(this.header={}),this.header[a]=b},this.getObjectToSend=function(){return{i:""+this.evid,o:this.operation,h:this.header,d:this.data}}}var $pex={};$pex.events=[],$pex.process=function(a){var b=(new Date).getTime();a.evid=""+b;var c=new PexRequest(a);$pex.events[b]=c,c.beforesendcb();try{PexBridge.submitEvent(c.getObjectToSend())}catch(d){var e={eid:b,rs:"-1",err:{c:"109",m:"CLIENT_NO_CONNECTION"}};PexBridge.handleEvent(b,e)}};var PexBridge={};PexBridge.handleEvent=function(a,b){var c=b.eid,d=b.rs,e=$pex.events[c];if(!e)return;if(d>=0){var f=new PexResponse(d,b.res);e.progresscb(f),d==4&&(e.successcb(f),e.completecb(f,!0))}else{var g=new PexError(b.err);e.failurecb(g),e.completecb(g,!1)}};